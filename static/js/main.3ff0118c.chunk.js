(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n(76)},36:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},55:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"fetchNotes",function(){return W}),n.d(a,"addNote",function(){return K}),n.d(a,"deleteNote",function(){return L});var o=n(0),r=n.n(o),s=n(25),c=n.n(s),i=(n(36),n(2)),u=n(9),l="FETCH_STICKERS",h="DELETE_STICKER",d="ADD_STICKER",p={notes:[]};var f=Object(i.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:case d:case h:return Object(u.a)({},e,{notes:t.notes});default:return e}}}),m=n(27),g=n(28),v=[m.a],b=i.compose.apply(void 0,[i.applyMiddleware.apply(void 0,v)].concat([])),y=Object(i.createStore)(f,{},Object(g.composeWithDevTools)(b)),N=n(11),j=n(3),E=n(4),O=n(6),k=n(5),C=n(7),T=(n(43),n(45),function(e){function t(){return Object(j.a)(this,t),Object(O.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.header||"";return r.a.createElement("h2",{className:"app-header"},e)}}]),t}(o.Component)),w=(n(47),{text:""}),x=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(O.a)(this,Object(k.a)(t).call(this,e))).hashCode=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},n.state=w,n}return Object(C.a)(t,e),Object(E.a)(t,[{key:"onChange",value:function(e){this.setState({text:e.target.value})}},{key:"onSubmit",value:function(e){var t={text:this.state.text,bgColor:document.getElementById("color").value};this.props.addNote(t),this.setState({text:""})}},{key:"render",value:function(){var e=this.state.text;return r.a.createElement("div",{className:"note-editor"},r.a.createElement("textarea",{placeholder:"Enter your note here ...",rows:"5",onChange:this.onChange.bind(this),name:"text",value:e}),r.a.createElement("input",{type:"color",id:"color"}),r.a.createElement("button",{className:"add-button",disabled:0===e.length,onClick:this.onSubmit.bind(this)},"Add"))}}]),t}(o.Component),S=(n(49),n(29)),D=n.n(S),I=(n(55),function(e){var t=e.note,n=e.deleteNote;return r.a.createElement("div",{className:"note",style:{backgroundColor:t.bgColor}},r.a.createElement("span",{className:"delete-note",onClick:function(e){n(t.messageID)}.bind(void 0)},"x"),t.text)}),A=function(e){function t(){return Object(j.a)(this,t),Object(O.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.grid;this.msnry=new D.a(e,{itemSelector:".note",columnWidth:200,gutter:10,isFitWidth:!0})}},{key:"componentDidUpdate",value:function(e,t,n){this.msnry.reloadItems(),this.msnry.layout()}},{key:"render",value:function(){var e=this,t=this.props.notes.map(function(t){return r.a.createElement(I,{note:t,deleteNote:e.props.deleteNote,key:t.messageID})});return r.a.createElement("div",{className:"notes-grid",ref:function(t){return e.grid=t}},t)}}]),t}(o.Component),B=n(16),H=n.n(B),M=n(30),R=n.n(M);function W(e){return function(t){R()("https://apeps.kiev.ua/api/getMessages").then(function(e){return e.json()}).then(function(n){var a=n.map(function(t){return U(t,e)});t({type:l,notes:a})}).catch(function(e){console.log(e),t({type:l,notes:[]})})}}function K(e,t){return function(n,a){var o=a().user.notes;H()({method:"post",url:"https://apeps.kiev.ua/api/addMessage",data:new URLSearchParams(e)}).then(function(a){a.data&&(e.messageID=a.data,e=U(e,t),o.push(e),n({type:d,notes:o}))}).catch(function(e){console.log(e),n({type:d,notes:o})})}}function L(e){return function(t,n){var a=n().user.notes;H()({method:"post",url:"https://apeps.kiev.ua/api/deleteMessage",data:new URLSearchParams({messageID:e})});for(var o=0;o<a.length;o++)a[o].messageID===e&&a.splice(o,1);t({type:h,notes:a})}}function U(e,t){var n,a,o,s,c;for(n=[],a=0,o=(c=e.text.split(/[\s\r\n]+/)).length;a<o;a++)0===(s=c[a]).indexOf("#")&&n.push(s);return e.hashTags=n,e.text=function(e,t,n,a){var o=this;return t.length?(console.log(e.split(n)),r.a.createElement("span",null,e.split(n).reduce(function(e,n,s){return s?e.concat(t.includes(n)?r.a.createElement("a",{onClick:a.bind(o,n)},n):n):[n]},[]))):e}(e.text,e.hashTags,/(#[A-Za-z0-9]+(?:|$))/g,t),e}var _={filteredNotes:null,hashTag:null},F=function(e){function t(e){var n;return Object(j.a)(this,t),(n=Object(O.a)(this,Object(k.a)(t).call(this,e))).addNote=function(e){n.props.actions.addNote(e,n.findByHashTag)},n.findByHashTag=function(e){var t=n.props.user.notes.filter(function(t){return t.hashTags&&t.hashTags.includes(e)});n.setState({filteredNotes:t,hashTag:e})},n.cancelHashTagSearch=function(){n.setState({filteredNotes:null,hashTag:null})},n.deleteNote=function(e){n.props.actions.deleteNote(e)},n.state=_,n}return Object(C.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.fetchNotes(this.findByHashTag)}},{key:"render",value:function(){var e=this.state.filteredNotes||this.props.user.notes,t=this.state.hashTag,n={text:t,bgColor:"rgb(255, 0, 1)"};return console.log(e),r.a.createElement("div",{className:"App"},r.a.createElement(T,{header:"Notes App"}),t?r.a.createElement(I,{deleteNote:this.cancelHashTagSearch,note:n}):"",r.a.createElement(x,{addNote:this.addNote}),r.a.createElement(A,{notes:e,deleteNote:this.deleteNote}))}}]),t}(o.Component);var J=Object(N.b)(function(e){return{user:e.user}},function(e){return{actions:Object(i.bindActionCreators)(Object(u.a)({},a),e)}})(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(N.a,{store:y},r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.3ff0118c.chunk.js.map